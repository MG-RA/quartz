<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Concept dependency graph (concepts-only)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    html, body { height: 100%; }
    body { margin: 0; background: #0f1115; color: #e6e6e6; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; }
    .wrap { padding: 12px; height: 100vh; box-sizing: border-box; display: flex; flex-direction: column; }
    .toolbar { display: flex; gap: 8px; align-items: center; margin: 0 0 10px 0; }
    .btn { background: #1b1f2a; color: #e6e6e6; border: 1px solid #3a4154; border-radius: 8px; padding: 6px 10px; cursor: pointer; }
    .btn:hover { border-color: #5b6782; }
    .hint { color: #9aa4b2; font-size: 12px; }
    .viewport { border: 1px solid #3a4154; border-radius: 10px; overflow: hidden; flex: 1; min-height: 0; }
    svg { width: 100%; height: 100%; display: block; touch-action: none; user-select: none; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="toolbar">
      <button class="btn" id="resetBtn" type="button">Reset</button>
      <button class="btn" id="zoomInBtn" type="button">Zoom +</button>
      <button class="btn" id="zoomOutBtn" type="button">Zoom -</button>
      <span class="hint">Drag to pan â€¢ Scroll to zoom</span>
    </div>
    <div class="viewport" id="viewport">
<svg xmlns="http://www.w3.org/2000/svg" width="1840" height="700" viewBox="0 0 1840 700" style="background:#0f1115">
<text x="40" y="42" fill="#e6e6e6" font-family="Helvetica" font-size="16">Concept dependency graph (concepts-only)</text>
<rect x="40" y="668" width="10" height="10" fill="#f9d65c" stroke="#3a4154"/>
<text x="54" y="678" fill="#e6e6e6" font-family="Helvetica" font-size="11">Primitives</text>
<rect x="180" y="668" width="10" height="10" fill="#8ecae6" stroke="#3a4154"/>
<text x="194" y="678" fill="#e6e6e6" font-family="Helvetica" font-size="11">First-order</text>
<rect x="320" y="668" width="10" height="10" fill="#90be6d" stroke="#3a4154"/>
<text x="334" y="678" fill="#e6e6e6" font-family="Helvetica" font-size="11">Mechanisms</text>
<rect x="460" y="668" width="10" height="10" fill="#f4a261" stroke="#3a4154"/>
<text x="474" y="678" fill="#e6e6e6" font-family="Helvetica" font-size="11">Accounting</text>
<rect x="600" y="668" width="10" height="10" fill="#e76f51" stroke="#3a4154"/>
<text x="614" y="678" fill="#e6e6e6" font-family="Helvetica" font-size="11">Failure</text>
<rect x="740" y="668" width="10" height="10" fill="#b5179e" stroke="#3a4154"/>
<text x="754" y="678" fill="#e6e6e6" font-family="Helvetica" font-size="11">Diagnostic</text>
<g id="edges" stroke-linecap="round" fill="none">
<path d="M 605.0,102.5 C 645.0,102.5 528.0,261.5 568.0,261.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 605.0,99.5 C 697.0,99.5 249.9,320.5 342.0,320.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 605.0,95.0 C 645.0,95.0 522.0,493.0 562.0,493.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1044.0,96.5 C 1208.2,96.5 410.9,99.5 575.0,99.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1044.0,99.5 C 1210.6,99.5 401.4,208.5 568.0,208.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1044.0,104.0 C 1210.6,104.0 401.4,260.0 568.0,260.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1044.0,101.0 C 1289.7,101.0 96.3,319.0 342.0,319.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1044.0,96.5 C 1212.7,96.5 393.3,491.5 562.0,491.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1044.0,101.0 C 1212.0,101.0 396.0,599.0 564.0,599.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1044.0,93.5 C 1084.0,93.5 975.0,270.5 1015.0,270.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 384.0,101.0 C 424.0,101.0 308.0,207.0 348.0,207.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1487.0,101.0 C 1885.7,101.0 -50.6,207.0 348.0,207.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1487.0,98.0 C 1808.7,98.0 246.4,210.0 568.0,210.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1487.0,99.5 C 1652.5,99.5 848.5,208.5 1014.0,208.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 388.0,151.0 C 428.0,151.0 312.0,269.0 352.0,269.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 388.0,149.5 C 428.0,149.5 309.0,438.5 349.0,438.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1264.0,95.0 C 1330.2,95.0 1386.8,101.0 1453.0,101.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1264.0,95.0 C 1507.6,95.0 324.4,213.0 568.0,213.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1264.0,93.5 C 1509.0,93.5 319.0,606.5 564.0,606.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1044.0,148.0 C 1208.2,148.0 410.9,160.0 575.0,160.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1044.0,160.0 C 1289.7,160.0 96.3,316.0 342.0,316.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1044.0,158.5 C 1084.0,158.5 974.0,205.5 1014.0,205.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1044.0,152.5 C 1287.2,152.5 105.8,435.5 349.0,435.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1044.0,160.0 C 1212.0,160.0 396.0,596.0 564.0,596.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 605.0,148.0 C 645.0,148.0 528.0,216.0 568.0,216.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 605.0,158.5 C 645.0,158.5 522.0,485.5 562.0,485.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 605.0,160.0 C 645.0,160.0 524.0,596.0 564.0,596.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 612.0,213.0 C 704.4,213.0 255.6,207.0 348.0,207.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 612.0,216.0 C 706.5,216.0 247.5,316.0 342.0,316.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 612.0,213.0 C 652.0,213.0 524.0,599.0 564.0,599.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,93.5 C 990.6,93.5 181.4,214.5 348.0,214.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,102.5 C 913.6,102.5 478.4,261.5 568.0,261.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,98.0 C 915.7,98.0 470.3,490.0 562.0,490.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,99.5 C 912.5,99.5 482.4,544.5 571.0,544.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,99.5 C 915.0,99.5 473.0,600.5 564.0,600.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,151.0 C 913.6,151.0 478.4,213.0 568.0,213.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,149.5 C 913.6,149.5 478.4,270.5 568.0,270.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,158.5 C 915.7,158.5 470.3,485.5 562.0,485.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,160.0 C 912.5,160.0 482.4,540.0 571.0,540.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,160.0 C 915.0,160.0 473.0,596.0 564.0,596.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 388.0,263.0 C 477.9,263.0 41.1,101.0 131.0,101.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 612.0,263.0 C 706.5,263.0 247.5,325.0 342.0,325.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 612.0,266.0 C 652.0,266.0 522.0,490.0 562.0,490.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 604.0,325.0 C 692.2,325.0 263.8,151.0 352.0,151.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 604.0,316.0 C 695.7,316.0 250.3,328.0 342.0,328.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 604.0,325.0 C 644.0,325.0 522.0,487.0 562.0,487.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 398.0,326.5 C 438.0,326.5 309.0,429.5 349.0,429.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1046.0,216.0 C 1290.3,216.0 103.7,204.0 348.0,204.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1046.0,213.0 C 1213.3,213.0 400.7,207.0 568.0,207.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1046.0,208.5 C 1292.4,208.5 95.6,323.5 342.0,323.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1046.0,207.0 C 1215.4,207.0 392.6,493.0 562.0,493.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1046.0,204.0 C 1366.2,204.0 -189.2,104.0 131.0,104.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 605.0,378.0 C 693.5,378.0 263.4,154.0 352.0,154.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 605.0,382.5 C 697.0,382.5 249.9,317.5 342.0,317.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 605.0,375.0 C 694.6,375.0 259.4,437.0 349.0,437.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 605.0,378.0 C 770.9,378.0 -34.9,98.0 131.0,98.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 384.0,379.5 C 424.0,379.5 312.0,152.5 352.0,152.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 384.0,372.0 C 424.0,372.0 312.0,272.0 352.0,272.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 384.0,373.5 C 424.0,373.5 302.0,326.5 342.0,326.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 384.0,376.5 C 424.0,376.5 309.0,435.5 349.0,435.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 384.0,382.5 C 472.6,382.5 42.5,93.5 131.0,93.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1704.0,104.0 C 1791.8,104.0 1365.2,92.0 1453.0,92.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1704.0,104.0 C 2177.2,104.0 -121.2,260.0 352.0,260.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1704.0,102.5 C 2178.2,102.5 -125.2,429.5 349.0,429.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,204.0 C 913.6,204.0 478.4,272.0 568.0,272.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,205.5 C 992.7,205.5 173.3,326.5 342.0,326.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,211.5 C 915.7,211.5 470.3,488.5 562.0,488.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,208.5 C 912.5,208.5 482.4,547.5 571.0,547.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,216.0 C 915.0,216.0 473.0,596.0 564.0,596.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 391.0,437.0 C 431.0,437.0 312.0,263.0 352.0,263.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 391.0,438.5 C 482.0,438.5 40.0,93.5 131.0,93.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 604.0,432.5 C 644.0,432.5 535.0,379.5 575.0,379.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 618.0,494.5 C 714.6,494.5 245.4,317.5 342.0,317.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 618.0,487.0 C 712.1,487.0 254.9,437.0 349.0,437.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 609.0,549.0 C 649.0,549.0 522.0,487.0 562.0,487.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,263.0 C 990.6,263.0 181.4,213.0 348.0,213.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,272.0 C 913.6,272.0 478.4,260.0 568.0,260.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,264.5 C 915.7,264.5 470.3,491.5 562.0,491.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,269.0 C 912.5,269.0 482.4,543.0 571.0,543.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,269.0 C 915.0,269.0 473.0,599.0 564.0,599.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,316.0 C 989.2,316.0 186.8,160.0 352.0,160.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,325.0 C 990.6,325.0 181.4,207.0 348.0,207.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,322.0 C 913.6,322.0 478.4,210.0 568.0,210.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,317.5 C 992.7,317.5 173.3,326.5 342.0,326.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,317.5 C 915.0,317.5 473.0,606.5 564.0,606.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 616.0,600.5 C 709.8,600.5 254.2,211.5 348.0,211.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 616.0,606.5 C 656.0,606.5 528.0,261.5 568.0,261.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 616.0,602.0 C 656.0,602.0 522.0,490.0 562.0,490.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,382.5 C 913.6,382.5 478.4,261.5 568.0,261.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,378.0 C 915.7,378.0 470.3,490.0 562.0,490.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,379.5 C 912.5,379.5 482.4,544.5 571.0,544.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 824.0,379.5 C 915.0,379.5 473.0,600.5 564.0,600.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1264.0,154.0 C 1330.2,154.0 1386.8,98.0 1453.0,98.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1264.0,157.0 C 1507.6,157.0 324.4,207.0 568.0,207.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1264.0,152.5 C 1586.7,152.5 19.3,323.5 342.0,323.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1264.0,155.5 C 1509.0,155.5 319.0,600.5 564.0,600.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1045.0,267.5 C 1291.0,267.5 96.0,320.5 342.0,320.5" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
<path d="M 1045.0,266.0 C 1214.0,266.0 393.0,490.0 562.0,490.0" stroke="#3a4154" stroke-width="1.0" opacity="0.8"/>
</g>
<g id="nodes">
<circle cx="590.0" cy="98.0" r="15.0" fill="#8ecae6" stroke="#3a4154" stroke-width="1.0"/>
<text x="590.0" y="127.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">absorption</text>
<circle cx="1030.0" cy="98.0" r="14.0" fill="#f4a261" stroke="#3a4154" stroke-width="1.0"/>
<text x="1030.0" y="126.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">accounting-failure</text>
<circle cx="370.0" cy="98.0" r="14.0" fill="#f9d65c" stroke="#3a4154" stroke-width="1.0"/>
<text x="370.0" y="126.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">accumulation</text>
<circle cx="1470.0" cy="98.0" r="17.0" fill="#b5179e" stroke="#3a4154" stroke-width="1.0"/>
<text x="1470.0" y="129.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">admissibility</text>
<circle cx="370.0" cy="154.0" r="18.0" fill="#f9d65c" stroke="#3a4154" stroke-width="1.0"/>
<text x="370.0" y="186.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">asymmetry</text>
<circle cx="1250.0" cy="98.0" r="14.0" fill="#e76f51" stroke="#3a4154" stroke-width="1.0"/>
<text x="1250.0" y="126.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">brittleness</text>
<circle cx="1030.0" cy="154.0" r="14.0" fill="#f4a261" stroke="#3a4154" stroke-width="1.0"/>
<text x="1030.0" y="182.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">collapse-surface</text>
<circle cx="370.0" cy="210.0" r="22.0" fill="#f9d65c" stroke="#3a4154" stroke-width="1.0"/>
<text x="370.0" y="246.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">constraint</text>
<circle cx="590.0" cy="154.0" r="15.0" fill="#8ecae6" stroke="#3a4154" stroke-width="1.0"/>
<text x="590.0" y="183.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">constraint-accumulation</text>
<rect x="565.8" y="192.4" width="48.4" height="35.2" rx="8" fill="#8ecae6" stroke="#e6e6e6" stroke-width="2.2"/>
<text x="590.0" y="246.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">constraint-load (hub: Aggregation hub)</text>
<circle cx="810.0" cy="98.0" r="14.0" fill="#90be6d" stroke="#3a4154" stroke-width="1.0"/>
<text x="810.0" y="126.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">containment</text>
<circle cx="810.0" cy="154.0" r="14.0" fill="#90be6d" stroke="#3a4154" stroke-width="1.0"/>
<text x="810.0" y="182.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">deprecation</text>
<circle cx="370.0" cy="266.0" r="18.0" fill="#f9d65c" stroke="#3a4154" stroke-width="1.0"/>
<text x="370.0" y="298.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">difference</text>
<circle cx="590.0" cy="266.0" r="22.0" fill="#8ecae6" stroke="#3a4154" stroke-width="1.0"/>
<text x="590.0" y="302.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">displacement</text>
<circle cx="590.0" cy="322.0" r="14.0" fill="#8ecae6" stroke="#3a4154" stroke-width="1.0"/>
<text x="590.0" y="350.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">erasure-asymmetry</text>
<circle cx="370.0" cy="322.0" r="28.0" fill="#f9d65c" stroke="#e6e6e6" stroke-width="2.2"/>
<circle cx="370.0" cy="322.0" r="23.0" fill="none" stroke="#e6e6e6" stroke-width="2.2"/>
<text x="370.0" y="364.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">erasure-cost (hub: Primitive hub)</text>
<circle cx="1030.0" cy="210.0" r="16.0" fill="#f4a261" stroke="#3a4154" stroke-width="1.0"/>
<text x="1030.0" y="240.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">feasible-set</text>
<circle cx="590.0" cy="378.0" r="15.0" fill="#8ecae6" stroke="#3a4154" stroke-width="1.0"/>
<text x="590.0" y="407.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">irreversibility</text>
<circle cx="370.0" cy="378.0" r="14.0" fill="#f9d65c" stroke="#3a4154" stroke-width="1.0"/>
<text x="370.0" y="406.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">irreversibility-quanta</text>
<circle cx="1690.0" cy="98.0" r="14.0" fill="#b5179e" stroke="#3a4154" stroke-width="1.0"/>
<text x="1690.0" y="126.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">lens</text>
<circle cx="810.0" cy="210.0" r="14.0" fill="#90be6d" stroke="#3a4154" stroke-width="1.0"/>
<text x="810.0" y="238.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">migration</text>
<circle cx="370.0" cy="434.0" r="21.0" fill="#f9d65c" stroke="#3a4154" stroke-width="1.0"/>
<text x="370.0" y="469.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">persistence</text>
<circle cx="590.0" cy="434.0" r="14.0" fill="#8ecae6" stroke="#3a4154" stroke-width="1.0"/>
<text x="590.0" y="462.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">persistence-gradient</text>
<circle cx="590.0" cy="490.0" r="28.0" fill="#8ecae6" stroke="#3a4154" stroke-width="1.0"/>
<text x="590.0" y="532.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">persistent-difference</text>
<circle cx="590.0" cy="546.0" r="19.0" fill="#8ecae6" stroke="#3a4154" stroke-width="1.0"/>
<text x="590.0" y="579.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">propagation</text>
<circle cx="810.0" cy="266.0" r="14.0" fill="#90be6d" stroke="#3a4154" stroke-width="1.0"/>
<text x="810.0" y="294.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">quarantine</text>
<circle cx="810.0" cy="322.0" r="14.0" fill="#90be6d" stroke="#3a4154" stroke-width="1.0"/>
<text x="810.0" y="350.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">ratchet</text>
<polygon points="618.8,613.9 601.9,630.8 578.1,630.8 561.2,613.9 561.2,590.1 578.1,573.2 601.9,573.2 618.8,590.1" fill="#8ecae6" stroke="#e6e6e6" stroke-width="2.2"/>
<text x="590.0" y="642.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">residual (hub: Mechanism-output hub)</text>
<circle cx="810.0" cy="378.0" r="14.0" fill="#90be6d" stroke="#3a4154" stroke-width="1.0"/>
<text x="810.0" y="406.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">rollback</text>
<circle cx="1250.0" cy="154.0" r="14.0" fill="#e76f51" stroke="#3a4154" stroke-width="1.0"/>
<text x="1250.0" y="182.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">saturation</text>
<circle cx="1030.0" cy="266.0" r="15.0" fill="#f4a261" stroke="#3a4154" stroke-width="1.0"/>
<text x="1030.0" y="295.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">tracking-mechanism</text>
<circle cx="150.0" cy="98.0" r="19.0" fill="#f9d65c" stroke="#3a4154" stroke-width="1.0"/>
<text x="150.0" y="131.0" fill="#e6e6e6" font-family="Helvetica" font-size="11" text-anchor="middle">transformation-space</text>
</g>
</svg>

    </div>
  </div>
  <script>
    (function () {
      const viewportEl = document.getElementById('viewport');
      const svg = viewportEl.querySelector('svg');
      if (!svg) return;
      if (!svg.getAttribute('viewBox')) {
        const w = svg.getAttribute('width') || 1000;
        const h = svg.getAttribute('height') || 800;
        svg.setAttribute('viewBox', `0 0 ${w} ${h}`);
      }

      const vb = svg.viewBox.baseVal;
      const initial = { x: vb.x, y: vb.y, width: vb.width, height: vb.height };

      const clamp = (v, min, max) => Math.max(min, Math.min(max, v));
      const zoomAt = (clientX, clientY, factor) => {
        const rect = svg.getBoundingClientRect();
        const px = (clientX - rect.left) / rect.width;
        const py = (clientY - rect.top) / rect.height;

        const newW = vb.width / factor;
        const newH = vb.height / factor;

        const dx = (vb.width - newW) * px;
        const dy = (vb.height - newH) * py;

        vb.x += dx;
        vb.y += dy;
        vb.width = newW;
        vb.height = newH;
      };

      let isPanning = false;
      let start = { x: 0, y: 0, vbX: 0, vbY: 0 };

      svg.addEventListener('pointerdown', (e) => {
        isPanning = true;
        svg.setPointerCapture(e.pointerId);
        start = { x: e.clientX, y: e.clientY, vbX: vb.x, vbY: vb.y };
      });
      svg.addEventListener('pointerup', () => { isPanning = false; });
      svg.addEventListener('pointercancel', () => { isPanning = false; });
      svg.addEventListener('pointermove', (e) => {
        if (!isPanning) return;
        const rect = svg.getBoundingClientRect();
        const dx = (e.clientX - start.x) * (vb.width / rect.width);
        const dy = (e.clientY - start.y) * (vb.height / rect.height);
        vb.x = start.vbX - dx;
        vb.y = start.vbY - dy;
      });

      svg.addEventListener('wheel', (e) => {
        e.preventDefault();
        const direction = e.deltaY > 0 ? -1 : 1;
        const factor = direction > 0 ? 1.15 : 1 / 1.15;

        const minW = initial.width * 0.08;
        const maxW = initial.width * 3.5;
        const beforeW = vb.width;
        zoomAt(e.clientX, e.clientY, factor);
        vb.width = clamp(vb.width, minW, maxW);
        vb.height = vb.width * (initial.height / initial.width);
        // If clamped, keep center stable-ish.
        if (vb.width !== beforeW / factor) {
          const cx = vb.x + vb.width / 2;
          const cy = vb.y + vb.height / 2;
          vb.x = cx - vb.width / 2;
          vb.y = cy - vb.height / 2;
        }
      }, { passive: false });

      const reset = () => {
        vb.x = initial.x;
        vb.y = initial.y;
        vb.width = initial.width;
        vb.height = initial.height;
      };
      document.getElementById('resetBtn')?.addEventListener('click', reset);
      document.getElementById('zoomInBtn')?.addEventListener('click', () => zoomAt(window.innerWidth / 2, 140, 1.2));
      document.getElementById('zoomOutBtn')?.addEventListener('click', () => zoomAt(window.innerWidth / 2, 140, 1 / 1.2));
    })();
  </script>
</body>
</html>
